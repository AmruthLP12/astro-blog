---
import Sun from "./icons/Sun.astro";
import Moon from "./icons/Moon.astro";
---

<button
  id="theme-toggle"
  class="relative h-9 w-9 overflow-hidden rounded-md
         inline-flex items-center justify-center
         hover:bg-muted transition-colors"
  aria-label="Toggle theme"
>
  <!-- Sun -->
  <Sun />

  <!-- Moon -->
  <Moon />
  <span class="sr-only">Toggle theme</span>
</button>

<script>
  const toggle = document.querySelector<HTMLButtonElement>("#theme-toggle");

  toggle?.addEventListener("click", () => {
    const root = document.documentElement;
    const isDark = root.classList.contains("dark");

    root.classList.toggle("dark");
    localStorage.setItem("theme", isDark ? "light" : "dark");
  });
</script>
